name: "Build Packages"
on:
  push

jobs:
  build_deb:
    name: "Build Debian Package"
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repository
        uses: actions/checkout@v2

      - run: |
          sudo apt update
          sudo apt install -y debootstrap
          cd runtimes/aleph-debian-11-python && sudo ./create_disk_image.sh && cd ../..
          cd examples/volumes && sudo ./build_squashfs.sh && cd ../..
          cd packaging && make all-podman-debian-11 && cd ..
          cd packaging && make all-podman-ubuntu-2004 && cd ..
